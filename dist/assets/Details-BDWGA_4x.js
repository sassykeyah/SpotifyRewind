import{g as f}from"./events-h85N344t.js";import{_ as g,c as r,a as b,f as k,b as t,t as c,g as T,p as w,h as I,o as n}from"./index-CnMI_Gzb.js";const u={clientId:"6e63c82f396e41038413047e5c1a8157",clientSecret:"2744765a35844aaf84521a468301c471"},S=async()=>{const e=btoa(`${u.clientId}:${u.clientSecret}`);return(await(await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${e}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"})).json()).access_token},B=async(e,i)=>{const o=await fetch(`https://api.spotify.com/v1/tracks/${e}`,{headers:{Authorization:`Bearer ${i}`}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()},E="/SpotifyRewind/images/SpotifyIcon.jpg",x={name:"Detail",props:["id"],data(){return{accessToken:"",track:null,isLoading:!0,error:null}},async mounted(){await this.getAccessToken(),await this.fetchTrack()},methods:{async getAccessToken(){this.accessToken=await S()},async fetchTrack(){this.isLoading=!0,this.error=null;try{const e=await B(this.id,this.accessToken);this.track=e,console.log("Track loaded:",e)}catch(e){console.error(`Error fetching track ${this.id}:`,e),this.error=e.message}finally{this.isLoading=!1}},getEventByTrackId(e){return f(e)}}},m=e=>(w("data-v-4676b815"),e=e(),I(),e),A={class:"item"},L=b('<div class="animated-background" data-v-4676b815><div class="shape circle-1" data-v-4676b815></div><div class="shape circle-2" data-v-4676b815></div><div class="shape triangle-1" data-v-4676b815></div><div class="shape triangle-2" data-v-4676b815></div><div class="shape square-1" data-v-4676b815></div><div class="shape square-2" data-v-4676b815></div><div class="shape diamond-1" data-v-4676b815></div><div class="shape diamond-2" data-v-4676b815></div><div class="shape hexagon-1" data-v-4676b815></div><div class="shape line-1" data-v-4676b815></div><div class="shape line-2" data-v-4676b815></div></div>',1),C={key:0,class:"loading"},N=m(()=>t("p",null,"Loading track...",-1)),V=[N],j={key:1,class:"error"},D={key:2},U={class:"year-section"},q={class:"year"},z={class:"track-details"},O={class:"two-column-layout"},P={class:"event-column"},R=["src","alt"],H={class:"event-info"},F={class:"event-title"},G={class:"description"},J={class:"caption"},K={class:"spotify-column"},M=["src","alt"],Q={class:"spotify-info"},W={class:"artist"},X={class:"album"},Y={class:"spotify-link-section"},Z=["href"],$=m(()=>t("img",{src:E,alt:"Spotify Logo",class:"spotify-logo"},null,-1));function tt(e,i,o,st,s,a){var d,l,h,_,p,v;return n(),r("div",A,[L,s.isLoading?(n(),r("div",C,V)):s.error?(n(),r("div",j,[t("p",null,"Error: "+c(s.error),1),t("button",{onClick:i[0]||(i[0]=(...y)=>a.fetchTrack&&a.fetchTrack(...y))},"Retry")])):s.track?(n(),r("div",D,[t("div",U,[t("h2",q,c((d=a.getEventByTrackId(this.id))==null?void 0:d.year),1)]),t("div",z,[t("div",O,[t("div",P,[t("img",{src:(l=a.getEventByTrackId(this.id))==null?void 0:l.imageUrl,alt:(h=a.getEventByTrackId(this.id))==null?void 0:h.imageAlt,class:"event-image"},null,8,R),t("div",H,[t("p",F,c((_=a.getEventByTrackId(this.id))==null?void 0:_.title),1),t("p",G,c((p=a.getEventByTrackId(this.id))==null?void 0:p.description),1),t("p",J,c((v=a.getEventByTrackId(this.id))==null?void 0:v.caption),1)])]),t("div",K,[t("img",{src:s.track.album&&s.track.album.images[0]?s.track.album.images[0].url:"",alt:s.track.name,class:"spotify-image"},null,8,M),t("div",Q,[t("h3",null,c(s.track.name),1),t("p",W,"by "+c(s.track.artists&&s.track.artists[0]?s.track.artists[0].name:"Unknown Artist"),1),t("p",X,"Album: "+c(s.track.album?s.track.album.name:"Unknown Album"),1)])])]),t("div",Y,[s.track.external_urls&&s.track.external_urls.spotify?(n(),r("a",{key:0,href:s.track.external_urls.spotify,target:"_blank",class:"spotify-link"},[$,T(" Open in Spotify ")],8,Z)):k("",!0)])])])):k("",!0)])}const ct=g(x,[["render",tt],["__scopeId","data-v-4676b815"]]);export{ct as default};
