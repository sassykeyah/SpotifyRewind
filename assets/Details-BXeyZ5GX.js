import{g as f,f as u,a as m}from"./spotify-0VoRSHOb.js";import{_ as g,c,a as s,t as i,f as y,g as k,b as T,o,p as b,h as I}from"./index-L-A9PHax.js";const B={name:"Detail",props:["id"],data(){return{accessToken:"",track:null,isLoading:!0,error:null}},computed:{spotifyIconUrl(){return"/SpotifyRewind/"+"images/SpotifyIcon.jpg"}},async mounted(){await this.getAccessToken(),await this.fetchTrack()},methods:{async getAccessToken(){this.accessToken=await f()},async fetchTrack(){this.isLoading=!0,this.error=null;try{const a=await u(this.id,this.accessToken);this.track=a,console.log("Track loaded:",a)}catch(a){console.error(`Error fetching track ${this.id}:`,a),this.error=a.message}finally{this.isLoading=!1}},getEventByTrackId(a){return m(a)}}},E=a=>(b("data-v-82f738a1"),a=a(),I(),a),S={class:"item"},w=T('<div class="animated-background" data-v-82f738a1><div class="shape circle-1" data-v-82f738a1></div><div class="shape circle-2" data-v-82f738a1></div><div class="shape triangle-1" data-v-82f738a1></div><div class="shape triangle-2" data-v-82f738a1></div><div class="shape square-1" data-v-82f738a1></div><div class="shape square-2" data-v-82f738a1></div><div class="shape diamond-1" data-v-82f738a1></div><div class="shape diamond-2" data-v-82f738a1></div><div class="shape hexagon-1" data-v-82f738a1></div><div class="shape line-1" data-v-82f738a1></div><div class="shape line-2" data-v-82f738a1></div></div>',1),x={key:0,class:"loading"},A=E(()=>s("p",null,"Loading track...",-1)),U=[A],L={key:1,class:"error"},N={key:2},V={class:"year-section"},D={class:"year"},q={class:"track-details"},C={class:"two-column-layout"},R={class:"event-column"},j=["src","alt"],O={class:"event-info"},z={class:"event-title"},F={class:"description"},G={class:"caption"},H={class:"spotify-column"},J=["src","alt"],K={class:"spotify-info"},M={class:"artist"},P={class:"album"},Q={class:"spotify-link-section"},W=["href"],X=["src"];function Y(a,r,Z,$,t,e){var n,l,d,h,_,v;return o(),c("div",S,[w,t.isLoading?(o(),c("div",x,U)):t.error?(o(),c("div",L,[s("p",null,"Error: "+i(t.error),1),s("button",{onClick:r[0]||(r[0]=(...p)=>e.fetchTrack&&e.fetchTrack(...p))},"Retry")])):t.track?(o(),c("div",N,[s("div",V,[s("h2",D,i((n=e.getEventByTrackId(this.id))==null?void 0:n.year),1)]),s("div",q,[s("div",C,[s("div",R,[s("img",{src:(l=e.getEventByTrackId(this.id))==null?void 0:l.imageUrl,alt:(d=e.getEventByTrackId(this.id))==null?void 0:d.imageAlt,class:"event-image"},null,8,j),s("div",O,[s("p",z,i((h=e.getEventByTrackId(this.id))==null?void 0:h.title),1),s("p",F,i((_=e.getEventByTrackId(this.id))==null?void 0:_.description),1),s("p",G,i((v=e.getEventByTrackId(this.id))==null?void 0:v.caption),1)])]),s("div",H,[s("img",{src:t.track.album&&t.track.album.images[0]?t.track.album.images[0].url:"",alt:t.track.name,class:"spotify-image"},null,8,J),s("div",K,[s("h3",null,i(t.track.name),1),s("p",M,"by "+i(t.track.artists&&t.track.artists[0]?t.track.artists[0].name:"Unknown Artist"),1),s("p",P,"Album: "+i(t.track.album?t.track.album.name:"Unknown Album"),1)])])]),s("div",Q,[t.track.external_urls&&t.track.external_urls.spotify?(o(),c("a",{key:0,href:t.track.external_urls.spotify,target:"_blank",class:"spotify-link"},[s("img",{src:e.spotifyIconUrl,alt:"Spotify Logo",class:"spotify-logo"},null,8,X),y(" Open in Spotify ")],8,W)):k("",!0)])])])):k("",!0)])}const as=g(B,[["render",Y],["__scopeId","data-v-82f738a1"]]);export{as as default};
