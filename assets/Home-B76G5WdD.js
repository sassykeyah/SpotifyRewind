import{e as g,g as w,f}from"./spotify-0VoRSHOb.js";import{_ as y,c as t,a as e,b as n,n as u,d as L,t as l,F as m,r as k,o,e as S,w as b,p as T,f as I,g as x,h as z}from"./index-DyjZNSNB.js";const B={name:"SpotifyTracks",data(){return{accessToken:"",events:g,tracks:[],isLoading:!0,loadingProgress:0}},async mounted(){this.setupBasicScroll();try{await this.getAccessToken(),await this.fetchTracks(),this.setupHorizontalScroll(),await this.$nextTick(()=>{window.scrollTo({left:0,behavior:"instant"})})}catch(a){console.error("Error loading content:",a)}finally{this.isLoading=!1}},beforeDestroy(){window.removeEventListener("wheel",this.handleScroll),window.removeEventListener("wheel",this.handleBasicScroll),window.removeEventListener("resize",this.handleResize)},methods:{async getAccessToken(){this.accessToken=await w()},async fetchTracks(){this.loadingProgress=5;const a=this.events.map(async(i,p)=>{try{const c=await f(i.trackId,this.accessToken);return this.loadingProgress=Math.round(10+(p+1)/this.events.length*90),{...c,description:i.description,title:i.title,year:i.year,trackId:i.trackId}}catch(c){return console.error(`Error fetching track ${i.trackId}:`,c),{id:i.trackId,name:"Track not available",artists:[{name:"Unknown Artist"}],album:{images:[{url:"/placeholder-album.jpg"}]},description:i.description,title:i.title,year:i.year,trackId:i.trackId}}});this.tracks=await Promise.all(a),this.loadingProgress=100},setupBasicScroll(){window.addEventListener("wheel",this.handleBasicScroll,{passive:!0})},setupHorizontalScroll(){window.removeEventListener("wheel",this.handleBasicScroll),window.addEventListener("wheel",this.handleScroll,{passive:!1}),window.addEventListener("resize",this.handleResize)},handleBasicScroll(a){},handleScroll(a){if(window.innerWidth>768){a.preventDefault();const i=a.deltaY*.8;window.scrollBy(i,0)}},handleResize(){window.innerWidth<=768?window.scrollTo({left:0,top:0,behavior:"smooth"}):window.scrollTo({left:0,top:0,behavior:"smooth"})}}},h=a=>(T("data-v-319f5d61"),a=a(),I(),a),E={class:"timeline"},P={key:0,class:"shape circle-1"},A={key:1,class:"shape circle-2"},R={key:2,class:"shape triangle-1"},C={key:3,class:"shape triangle-2"},V={key:4,class:"shape square-1"},N={key:5,class:"shape square-2"},D={key:6,class:"shape diamond-1"},F={key:7,class:"shape diamond-2"},H={key:8,class:"shape hexagon-1"},j={key:9,class:"shape line-1"},q={key:10,class:"shape line-2"},M={class:"timeline-content"},W={class:"content intro-timeline-card"},O={class:"intro-content"},U=h(()=>e("h1",null,"Spotify Rewind",-1)),Y=h(()=>e("p",null,"Take a trip through Australia's most significant historical moments, and the most popular songs from that year. From the 1956 Melbourne Olympics to the 2023 Voice to Parliament referendum, discover how our nations story can be emulated through the connection of music and history.",-1)),G=h(()=>e("p",null,"Spotify Rewind provides a juxtaposition between the two sets of data and is not to be used to draw literal conclusions.",-1)),J=h(()=>e("div",{class:"scroll-instruction"},[e("span",{class:"desktop-instruction"},"Scroll horizontally to explore the timeline"),e("span",{class:"mobile-instruction"},"Scroll down to explore the timeline")],-1)),K={key:0,class:"loading-progress"},Q={class:"progress-bar"},X={class:"loading-text"},Z={key:0,class:"skeleton-container"},$=z('<div class="skeleton skeleton-image" data-v-319f5d61></div><div class="skeleton skeleton-year" data-v-319f5d61></div><div class="skeleton skeleton-title" data-v-319f5d61></div><div class="skeleton skeleton-description" data-v-319f5d61></div><div class="skeleton skeleton-track-name" data-v-319f5d61></div><div class="skeleton skeleton-artist" data-v-319f5d61></div>',6),ee=[$],se=["src"],te={class:"track-info"};function oe(a,i,p,c,s,ie){const v=x("RouterLink");return o(),t("div",E,[e("div",{class:u(["animated-background",{"animations-loaded":!s.isLoading}])},[s.isLoading?n("",!0):(o(),t("div",P)),s.isLoading?n("",!0):(o(),t("div",A)),s.isLoading?n("",!0):(o(),t("div",R)),s.isLoading?n("",!0):(o(),t("div",C)),s.isLoading?n("",!0):(o(),t("div",V)),s.isLoading?n("",!0):(o(),t("div",N)),s.isLoading?n("",!0):(o(),t("div",D)),s.isLoading?n("",!0):(o(),t("div",F)),s.isLoading?n("",!0):(o(),t("div",H)),s.isLoading?n("",!0):(o(),t("div",j)),s.isLoading?n("",!0):(o(),t("div",q))],2),e("div",M,[e("div",W,[e("div",O,[U,Y,G,J,s.isLoading?(o(),t("div",K,[e("div",Q,[e("div",{class:"progress-fill",style:L({width:s.loadingProgress+"%"})},null,4)]),e("p",X,"Loading tracks... "+l(s.loadingProgress)+"%",1)])):n("",!0)])]),s.isLoading?(o(),t("div",Z,[(o(!0),t(m,null,k(s.events,(r,d)=>(o(),t("div",{class:u(["content skeleton-card",d%2===0?"right":"left"]),key:"skeleton-"+d},ee,2))),128))])):n("",!0),s.isLoading?n("",!0):(o(!0),t(m,{key:1},k(s.tracks,(r,d)=>(o(),t("div",{class:u(["content",d%2===0?"right":"left"]),key:r.id},[S(v,{to:{name:"track",params:{id:r.trackId}}},{default:b(()=>{var _;return[e("img",{src:(_=r.album.images[0])==null?void 0:_.url,alt:"Album Cover"},null,8,se),e("h2",null,l(r.year),1),e("h3",null,l(r.title),1),e("h4",null,l(r.description),1),e("div",te,[e("h5",null,l(r.name),1),e("h5",null,"by "+l(r.artists[0].name),1)])]}),_:2},1032,["to"])],2))),128))])])}const re=y(B,[["render",oe],["__scopeId","data-v-319f5d61"]]);export{re as default};
